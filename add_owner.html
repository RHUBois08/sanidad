<!DOCTYPE html>
<html>
<head>
    <title>Sanitary Permit Issuance</title>
    <link rel="stylesheet" href="css\2.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>
</head>
<body>
<body>
    <div class="top-bar">
        <img src="image\My project (1).png" style="width: 90px; height: auto; float: left; margin-left: 2%">
        <img src="image\MUNICIPAL HEALTH OFFICE 2172025 (1).png" style="width: 90px; height: auto; float: left; margin-left: 10px">
        <span>Issuance of Sanitary Permit<kbd></kbd></span>
             <a href="index.html" target="_blank"><img src="image\jhjhj.png" style="width: 40px; height: auto; float: left; margin-left: -17%;
    z-index:100; margin-top:-1%;"></a>
    </div>
    <div class="content">
      <div class="employee-list">
    <div class="top-bars"></div>
    <span><kbd></kbd></span></div>
<!-- Removed the data display table from add_owner.html as per request -->
<!--
<table id="applicationTable" border="1">
    <thead>
        <tr>
            <th>Business Name</th>
            <th>Owner/Applicant</th>
            <th>Applicant Type</th>
            <th>Application Date</th>
            <th>Remarks</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody id="applicationTableBody">

</table>
-->
</div>
    <form name="submit-to-google-sheet">
        <div class="top-barz" style="display: flex; flex-wrap: wrap; gap: 20px;">
                <div style="display: flex; flex-direction: column; width: 18.7%; position: relative;">
                    <label for="businessName" style="background: white; padding: 0 5px;">Business Name</label>
                    <input style="height: 30px; border: 1px solid gray;" placeholder="+" type="text" id="businessName" name="Business Name" required>
                </div>
                <div style="display: flex; flex-direction: column; width: 265.7px; position: relative;">
                    <label for="ownerName" style="background: white; padding: 0 5px;">Owner/Applicant</label>
                    <input style="height: 30px; border: 1px solid gray;" placeholder="+" type="text" id="ownerName" name="Owner/Applicant" required>
                </div>
                <div style="display: flex; flex-direction: column; width: 239.5px; position: relative;">
                    <label for="applicantType" style="background: white; padding: 0 5px;">Applicant Type</label>
                    <input style="height: 30px; border: 1px solid gray;" placeholder="+" type="text" id="applicantType" name="Applicant Type" required>
                </div>
                <div style="display: flex; flex-direction: column; width: 267px; position: relative;">
                    <label for="applicationDate" style="background: white; padding: 0 5px;">Application Date</label>
                    <input style="height: 32px; border: 1px solid gray;" type="date" id="applicationDate" name="Application Date" required>
                </div>
                <div style="display: flex; flex-direction: column; width: 11.8%; position: relative;">
                    <label for="remarks" style="background: white; padding: 0 5px;">Remarks</label>
                    <select style="height: 36px; border: 1px solid gray;" id="remarks" name="Remarks" required>
                        <option value="">Select</option>
                        <option value="Approved">Approved</option>
                        <option value="Not Approved">Not Approved</option>
                    </select>
                </div>
                <div style="display: flex; flex-direction: column; width: 130px; position: relative;">
                    <label for="applicationStatus" style="background: white; padding: 0 5px;">Status</label>
                    <select style="height: 36px; border: 1px solid gray;" id="status" name="Status" required>
                        <option value="">Select Status</option>
                        <option value="Active">Active</option>
                        <option value="Not Active">Not Active</option>
                    </select>
                </div>
        </div> 
<input style="height: 30px; width: 10%; margin-left: 89%; position:fixed;
margin-top: 13%; border-radius: 5px; border: 1px solid black;" type="submit" value="Submit">

</form>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.querySelector('form[name="submit-to-google-sheet"]');

  // Handle form submission
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = {
      businessName: form.businessName.value,
      ownerName: form.ownerName.value,
      applicantType: form.applicantType.value,
      applicationDate: form.applicationDate.value,
      remarks: form.remarks.value,
      status: form.status.value,
    };

    try {
      const response = await fetch('http://localhost:3000/api/owners', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData),
      });
      if (!response.ok) throw new Error('Network response was not ok');
      // Clear form
      form.reset();
      alert('Data submitted successfully!');
    } catch (error) {
      console.error('Error submitting data:', error);
      alert('Failed to submit data.');
    }
  });
});
</script>

    </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
